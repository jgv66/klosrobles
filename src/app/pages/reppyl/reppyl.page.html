
<ion-header no-border>

  <ion-toolbar color="dark">

    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>

    <ion-title text-center text-capitalize>Resumen P&L Clientes Acumulado : {{ nombreMes }} / {{ periodo }}</ion-title>

    <ion-buttons slot="end">

        <ion-button (click)="notas()">            
            <ion-icon slot="icon-only" name="notifications"><ion-badge color='primary' >{{ hayNotas }}</ion-badge></ion-icon>
        </ion-button>

        <ion-button (click)="periodos( $event )"> <ion-icon slot="icon-only" name="calendar"></ion-icon></ion-button>
        <ion-button (click)="millones()">         <ion-icon slot="icon-only" [name]=" (millon === false)?'eye':'eye-off' "></ion-icon></ion-button>
    </ion-buttons>

  </ion-toolbar>

</ion-header> 


<ion-content padding>

  <div class="chart-container">
      <div id="pieChart1" class="chart"></div>
      <div id="pieChart2" class="chart"></div>
      <div id="pieChart3" class="chart"></div>
  </div>

  <ion-list>

    <ion-grid no-padding fixed class="header" (click)="OnOffTotal()" >
        <ion-row>
            <ion-col             size="1.4"><ion-label>Empresa          </ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>Vta. Neta     MM$</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>Costo Operacional</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>Rebaja de Precios</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>Margen Bruto     </ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>Gasto Promotores  </ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>Cross-Docking    </ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>Convenio Variable</ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>Convenio Fijo    </ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>Contribuci√≥n     </ion-label></ion-col>
        </ion-row>
    </ion-grid>

    <ion-grid no-padding fixed style=" width: inherit;" >
        <ion-row *ngFor="let dato of rows; let i = index;" (click)="OnOff( dato )" [ngClass]="(i % 2 == 0) ? 'kodd' : 'keven' ">
          <ion-col             size="1.4"><ion-label>{{ dato.sigla                               }}</ion-label></ion-col>
          <ion-col class="der" size="1.2"><ion-label>{{ dato.vta_neta          | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.2"><ion-label>{{ dato.costo_operacional | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.2"><ion-label>{{ dato.rebaja_de_precios | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.2"><ion-label>{{ dato.margen_bruto      | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.2"><ion-label>{{ dato.gasto_promotores  | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.1"><ion-label>{{ dato.cross_docking     | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.1"><ion-label>{{ dato.convenio_variable | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.1"><ion-label>{{ dato.convenio_fijo     | number:"1.0-0"  }}</ion-label></ion-col>
          <ion-col class="der" size="1.2"><ion-label>{{ dato.contribucion      | number:"1.0-0"  }}</ion-label></ion-col>
          <!-- fila de marcas -->
          <ion-grid  *ngIf=" dato.show " no-padding fixed class="header-in" style=" width: auto;">
            <ion-row *ngFor="let marca of dato.marcas" [ngClass]="(i % 2 == 0) ? 'kodd' : 'keven' ">
              <ion-col class="zen" size="1.4"><ion-label>{{ marca.nombre_marca                        }}</ion-label></ion-col>
              <ion-col class="der" size="1.2"><ion-label>{{ marca.vta_neta          | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.2"><ion-label>{{ marca.costo_operacional | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.2"><ion-label>{{ marca.rebaja_de_precios | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.2"><ion-label>{{ marca.margen_bruto      | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.2"><ion-label>{{ marca.gasto_promotores  | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.1"><ion-label>{{ marca.cross_docking     | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.1"><ion-label>{{ marca.convenio_variable | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.1"><ion-label>{{ marca.convenio_fijo     | number:"1.0-0"  }}</ion-label></ion-col>
              <ion-col class="der" size="1.2"><ion-label>{{ marca.contribucion      | number:"1.0-0"  }}</ion-label></ion-col>           
            </ion-row>
          </ion-grid>

        </ion-row>
    </ion-grid>

    <ion-grid no-padding fixed class="header" style=" width: auto;">
        <ion-row>
            <ion-col             size="1.4"><ion-label>Totales          </ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>{{ sumas[0] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>{{ sumas[1] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>{{ sumas[2] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>{{ sumas[3] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>{{ sumas[4] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>{{ sumas[5] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>{{ sumas[6] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.1"><ion-label>{{ sumas[7] | number:"1.0-0"  }}</ion-label></ion-col>
            <ion-col class="der" size="1.2"><ion-label>{{ sumas[8] | number:"1.0-0"  }}</ion-label></ion-col>
          </ion-row>
    </ion-grid>

  </ion-list>

</ion-content>
